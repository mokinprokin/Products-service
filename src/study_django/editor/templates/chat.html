<!DOCTYPE html>
<html lang="en">
<head>
    {% extends "home.html" %}
    {% block head  %}
    {% load static %}
    {% load django_bootstrap5 %}
    <link rel="stylesheet" href="{% static 'css/home/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile/input-profile-style.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile/profile.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile/profile-image.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile/profile-card-style.css' %}">
    <link rel="stylesheet" href="{% static 'css/home/carousel-style.css' %}">
    <link rel="stylesheet" href="{% static 'css/chats/chat.css' %}">
    <link rel="stylesheet" href="{% static 'js/chat.js' %}">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    {% endblock %}
</head>
<body>
    {% block content %}
        {% block nav-menu %} {{block.super}} {% endblock %}
    <div class="container">
        <section class="chatbox">
            <section class="chat-window">
                {% for i in messages %}
                    {% if  i.user.id == user.id %}
                        <article class="msg-container msg-self" id="msg-0">
                            <div class="msg-box">
                            <div class="flr">
                                <div class="messages">
                                <p class="msg" id="msg-1">
                                    {{i.message}}
                                </p>
                                </div>
                                <span class="timestamp"><span class="username">{{i.user.user.username}}</span>&bull;<span class="posttime">{{i.date}}</span></span>
                            </div>
                            {% if i.user.image %}
                            <img class="user-img" id="user-0" src="{{i.user.image.url}}" />
                            {% else %}
                            <img src="{% static 'media/user-img34y4328y383rhrbudfbd6737gfakjhe37.jpeg' %}" alt="">
                            {% endif %}
                            </div>
                      </article>
                    {% else %}
                    <article class="msg-container msg-remote" id="msg-0">
                        <div class="msg-box">
                            {% if i.user.image %}
                            <img class="user-img" id="user-0" src="{{i.user.image.url}}" />
                            {% else %}
                            <img src="{% static 'media/user-img34y4328y383rhrbudfbd6737gfakjhe37.jpeg' %}" alt="">
                            {% endif %}
                            <div class="flr">
                                <div class="messages">
                                <p class="msg" id="msg-0">
                                    {{i.message}}
                                </p>
                                </div>
                                <span class="timestamp"><span class="username">{{i.user.user.username}}</span>&bull;<span class="posttime">{{i.date}}</span></span>
                            </div>
                        </div>
                      </article>
                    {% endif %}
                {% endfor %}
            </section>
            <form class="chat-input" method="post" style="margin: 0;">
              {% csrf_token %}
              <div>              
                <input type="text" name="message" autocomplete="on" placeholder="Type a message">
                <button type="submit">
                  <svg style="width:24px;height:24px" viewBox="0 0 24 24"><path fill="rgba(0,0,0,.38)" d="M17,12L12,17V14H8V10H12V7L17,12M21,16.5C21,16.88 20.79,17.21 20.47,17.38L12.57,21.82C12.41,21.94 12.21,22 12,22C11.79,22 11.59,21.94 11.43,21.82L3.53,17.38C3.21,17.21 3,16.88 3,16.5V7.5C3,7.12 3.21,6.79 3.53,6.62L11.43,2.18C11.59,2.06 11.79,2 12,2C12.21,2 12.41,2.06 12.57,2.18L20.47,6.62C20.79,6.79 21,7.12 21,7.5V16.5M12,4.15L5,8.09V15.91L12,19.85L19,15.91V8.09L12,4.15Z" /></svg>
               </button>
              </div>
            </form>
          </section>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    {% endblock %}
</body>
</html>